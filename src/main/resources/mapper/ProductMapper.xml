<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hyundai.project.dao.ProductListDAO">
   <select id="getListAll" resultType="com.hyundai.project.dto.ProductListDTO">
    <![CDATA[
        select p.pid, c.cimage1, c.cimage2, c.ccolorimage, p.pname, p.pprice, p.bname, c.ccolorcode
		from product p
		join color c on p.pid = c.pid
		
     ]]>
   </select>
   
   <select id="getListWithPaging" resultType="com.hyundai.project.dto.ProductListDTO">
 		<![CDATA[
			select * from
			(select rownum rn, p.pid, p.bname, p.pname, p.pprice, c.ccolorcode, c.cimage1, c.cimage2, c.ccolorimage
			from product p join color c on p.pid = c.pid
			where clarge = #{param2} and cmedium = #{param3} and csmall = #{param4})
			where rn between (#{param1.pageNum} -1) * #{param1.amount} and (#{param1.pageNum} * #{param1.amount})
			order by rn desc
    	]]>
	</select>
	
	<select id="getTotal" resultType="int">
		select count(*) from product 
			where clarge = #{param1} and cmedium = #{param2} and csmall = #{param3}
	</select>
   
</mapper>