<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 
 /* 
 * 작성자 : 문혁
 * [게시판 글쓰기, 목록 조회, 상세 조회, 삭제, 수정, 총 게시글 수 조회] 쿼리
 */
  -->
<mapper namespace="com.hyundai.project.dao.BoardDAO">

	<insert id="insertBoard" parameterType="BoardDTO">
    <selectKey keyProperty="no" resultType="int" order="BEFORE">
        SELECT s_board.nextval from dual
    </selectKey>
		insert into board(no,
		email, title, content, password)
		values(s_board.currval, #{email},
		#{title}, #{content}, #{password})
	</insert>

	<select id="getBoardList" resultType="BoardDTO">
        select b.* from  
        (select rownum num, no, title, email, regdate from
        (select * from board order by no desc)) b 
        where b.num between #{startNum} and #{endNum}
	</select>

	<select id="getDetail" parameterType="long"
		resultType="BoardDTO">
		SELECT no,title,email,regdate,content
		FROM board
		WHERE no=#{no}
	</select>

	<delete id="deleteBoard" parameterType="BoardDTO">
		DELETE board
		WHERE
		no=#{no}
		AND password=#{password}
	</delete>

	<update id="updateBoard" parameterType="BoardDTO">
		update board set
		email =#{email}
		,title =#{title}
		,content=#{content}
		where no=#{no} and password=#{password}
	</update>

	<select id="getTotal" resultType="long">
		select count(*) from board
	</select>

</mapper>
